# æœƒè­°å®¤é ç´„ Agent

åŸºæ–¼ LangGraph çš„å¤š Agent æœƒè­°å®¤é ç´„ç³»çµ±ã€‚æ¡ç”¨ Supervisor æ¶æ§‹ï¼Œå°‡ç”¨æˆ¶è«‹æ±‚æ™ºèƒ½è·¯ç”±åˆ°å°ˆæ¥­ Agent è™•ç†ã€‚

## ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   User Input    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Supervisor Agent     â”‚
                    â”‚   (è·¯ç”±æ±ºç­–)            â”‚
                    â”‚   - åˆ†æç”¨æˆ¶æ„åœ–        â”‚
                    â”‚   - åˆ†æ´¾çµ¦å°ˆæ¥­Agent     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                 â”‚                 â”‚
              â–¼                 â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Booking Agent   â”‚ â”‚ Query Agent â”‚ â”‚ Management Agentâ”‚
    â”‚ (é ç´„å°ˆå“¡)       â”‚ â”‚ (æŸ¥è©¢å°ˆå“¡)   â”‚ â”‚ (ç®¡ç†å°ˆå“¡)       â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ Tools:          â”‚ â”‚ Tools:      â”‚ â”‚ Tools:          â”‚
    â”‚ - æŸ¥è©¢å¤§æ¨“       â”‚ â”‚ - æŸ¥è©¢å¤§æ¨“   â”‚ â”‚ - æŸ¥è©¢å·²é ç´„     â”‚
    â”‚ - æŸ¥è©¢æœƒè­°å®¤     â”‚ â”‚ - æŸ¥è©¢æœƒè­°å®¤ â”‚ â”‚ - å–æ¶ˆæœƒè­°å®¤     â”‚
    â”‚ - é ç´„          â”‚ â”‚             â”‚ â”‚                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ æª”æ¡ˆçµæ§‹

```
src/meeting_room/
â”œâ”€â”€ __init__.py      # æ¨¡çµ„å…¥å£
â”œâ”€â”€ state.py         # State å®šç¾© (MeetingState)
â”œâ”€â”€ tools.py         # 5 å€‹æœƒè­°å®¤ç›¸é—œå·¥å…·
â”œâ”€â”€ prompts.py       # å„ Agent çš„ç³»çµ±æç¤ºè©
â””â”€â”€ agent.py         # LangGraph å¤š Agent å·¥ä½œæµ
```

## ğŸ› ï¸ å…§å»ºå·¥å…·

| å·¥å…·åç¨± | åŠŸèƒ½æè¿° | ä½¿ç”¨çš„ Agent |
|---------|---------|-------------|
| `get_available_buildings` | æŸ¥è©¢æ‰€æœ‰å¯é ç´„çš„å¤§æ¨“ | Booking, Query |
| `get_available_rooms` | æŸ¥è©¢æŒ‡å®šå¤§æ¨“åœ¨ç‰¹å®šæ—¥æœŸçš„å¯ç”¨æœƒè­°å®¤ | Booking, Query |
| `book_meeting_room` | é ç´„æœƒè­°å®¤ | Booking |
| `get_user_reservations` | æŸ¥è©¢ç”¨æˆ¶å·²é ç´„çš„æœƒè­°å®¤ | Management |
| `cancel_reservation` | å–æ¶ˆæœƒè­°å®¤é ç´„ | Management |

## ğŸš€ å¿«é€Ÿé–‹å§‹

### åŸºæœ¬ä½¿ç”¨

```python
from src.meeting_room import create_meeting_room_agent

# å»ºç«‹ Agentï¼ˆå¤š Agent æ¨¡å¼ï¼‰
agent = create_meeting_room_agent(mode="multi", user_id="user001")

# å°è©±
response = agent.chat("æˆ‘æƒ³é ç´„æœƒè­°å®¤")
print(response)
```

### å…©ç¨®æ¨¡å¼

| æ¨¡å¼ | èªªæ˜ | é©ç”¨å ´æ™¯ |
|-----|------|---------|
| `multi` | Supervisor + 3 å°ˆæ¥­ Agent | è¤‡é›œå ´æ™¯ï¼Œéœ€è¦ç²¾ç¢ºæ„åœ–è·¯ç”± |
| `simple` | å–®ä¸€ ReAct Agent | ç°¡å–®å ´æ™¯ï¼Œå¿«é€ŸéŸ¿æ‡‰ |

```python
# å¤š Agent æ¨¡å¼ (é è¨­)
agent = create_meeting_room_agent(mode="multi")

# ç°¡å–®æ¨¡å¼
agent = create_meeting_room_agent(mode="simple")
```

## ğŸ¯ ç¯„ä¾‹å°è©±

### é ç´„æµç¨‹
```
ç”¨æˆ¶: æˆ‘æƒ³é ç´„æœƒè­°å®¤
Agent: ã€å¯é ç´„å¤§æ¨“åˆ—è¡¨ã€‘
       ğŸ“ Aæ£Ÿ - ç¸½éƒ¨å¤§æ¨“
       ğŸ“ Bæ£Ÿ - ç ”ç™¼ä¸­å¿ƒ
       ğŸ“ Cæ£Ÿ - ç‡Ÿé‹å¤§æ¨“
       ğŸ’¡ è«‹å‘Šè¨´æˆ‘æ‚¨æƒ³é ç´„å“ªæ£Ÿå¤§æ¨“ï¼Œä»¥åŠé ç´„æ—¥æœŸã€‚

ç”¨æˆ¶: æˆ‘è¦é ç´„ A æ£Ÿæ˜å¤©çš„æœƒè­°å®¤
Agent: ã€Aæ£Ÿ - ç¸½éƒ¨å¤§æ¨“ - 2025-12-16 å¯é ç´„æœƒè­°å®¤ã€‘
       ğŸšª å¤§æœƒè­°å®¤ (A-101) - å®¹ç´ 30 äºº
       ğŸšª ä¸­å‹æœƒè­°å®¤A (A-201) - å®¹ç´ 15 äºº
       ...
       ğŸ’¡ è«‹å‘Šè¨´æˆ‘æ‚¨è¦é ç´„çš„æœƒè­°å®¤IDã€æ™‚é–“å’Œæœƒè­°ä¸»é¡Œã€‚

ç”¨æˆ¶: é ç´„ A-101ï¼Œ9:00-10:00ï¼Œé€±ä¸€ä¾‹æœƒ
Agent: âœ… é ç´„æˆåŠŸï¼
       é ç´„ç·¨è™Ÿ: RES-ABC123
       æœƒè­°å®¤: å¤§æœƒè­°å®¤ (A-101)
       æ™‚é–“: 2025-12-16 09:00-10:00
```

### æŸ¥è©¢é ç´„
```
ç”¨æˆ¶: æŸ¥è©¢æˆ‘çš„é ç´„
Agent: ã€ç”¨æˆ¶ user001 çš„é ç´„è¨˜éŒ„ã€‘
       å…± 2 ç­†é ç´„
       1. ğŸ“… å³å°‡åˆ°ä¾†
          é ç´„ç·¨è™Ÿ: RES-001
          æœƒè­°ä¸»é¡Œ: é€±ä¸€ä¾‹æœƒ
          ...
```

### å–æ¶ˆé ç´„
```
ç”¨æˆ¶: å–æ¶ˆ RES-001
Agent: âœ… é ç´„å·²æˆåŠŸå–æ¶ˆï¼
       é ç´„ç·¨è™Ÿ: RES-001
       ...
```

## ğŸ”§ Agent è©³ç´°èªªæ˜

### Supervisor Agent
- **è·è²¬**: åˆ†æç”¨æˆ¶æ„åœ–ï¼Œè·¯ç”±åˆ°é©ç•¶çš„å°ˆæ¥­ Agent
- **è·¯ç”±è¦å‰‡**:
  - ã€Œé ç´„ã€ã€Œè¨‚ã€ã€Œå®‰æ’ã€â†’ Booking Agent
  - ã€ŒæŸ¥è©¢ã€ã€Œçœ‹çœ‹ã€ã€Œæœ‰å“ªäº›ã€â†’ Query Agent
  - ã€Œæˆ‘çš„é ç´„ã€ã€Œå–æ¶ˆã€â†’ Management Agent

### Booking Agent (é ç´„å°ˆå“¡)
- **è·è²¬**: å¼•å°ç”¨æˆ¶å®Œæˆæœƒè­°å®¤é ç´„æµç¨‹
- **æµç¨‹**: é¸å¤§æ¨“ â†’ é¸æ—¥æœŸ â†’ é¸æœƒè­°å®¤ â†’ ç¢ºèªé ç´„
- **å·¥å…·**: `get_available_buildings`, `get_available_rooms`, `book_meeting_room`

### Query Agent (æŸ¥è©¢å°ˆå“¡)
- **è·è²¬**: å›ç­”é—œæ–¼å¤§æ¨“å’Œæœƒè­°å®¤çš„æŸ¥è©¢
- **å·¥å…·**: `get_available_buildings`, `get_available_rooms`

### Management Agent (ç®¡ç†å°ˆå“¡)
- **è·è²¬**: è™•ç†å·²é ç´„çš„æŸ¥è©¢å’Œå–æ¶ˆ
- **å·¥å…·**: `get_user_reservations`, `cancel_reservation`

## ğŸ“Š æ¨¡æ“¬è³‡æ–™

ç›®å‰ä½¿ç”¨æ¨¡æ“¬è³‡æ–™ï¼Œå¯åœ¨ `tools.py` ä¸­ä¿®æ”¹ï¼š

### å¤§æ¨“è³‡æ–™
```python
BUILDINGS_DB = {
    "A": {"name": "Aæ£Ÿ - ç¸½éƒ¨å¤§æ¨“", "floors": 10, ...},
    "B": {"name": "Bæ£Ÿ - ç ”ç™¼ä¸­å¿ƒ", "floors": 8, ...},
    "C": {"name": "Cæ£Ÿ - ç‡Ÿé‹å¤§æ¨“", "floors": 6, ...},
}
```

### æœƒè­°å®¤è³‡æ–™
```python
ROOMS_DB = {
    "A": [
        {"id": "A-101", "name": "å¤§æœƒè­°å®¤", "capacity": 30, ...},
        ...
    ],
    ...
}
```

## ğŸ”„ æ•´åˆå¯¦éš›è³‡æ–™åº«

å°‡ `tools.py` ä¸­çš„æ¨¡æ“¬è³‡æ–™æ›¿æ›ç‚ºå¯¦éš›è³‡æ–™åº«æŸ¥è©¢ï¼š

```python
from your_database import db

@tool
def get_available_buildings() -> str:
    """æŸ¥è©¢å¯é ç´„çš„å¤§æ¨“"""
    buildings = db.query(Building).all()
    # æ ¼å¼åŒ–è¼¸å‡º...
    return result

@tool
def book_meeting_room(...) -> str:
    """é ç´„æœƒè­°å®¤"""
    # å¯«å…¥è³‡æ–™åº«
    db.add(Reservation(...))
    db.commit()
    return "é ç´„æˆåŠŸ"
```

## ğŸ“ è‡ªè¨‚æç¤ºè©

åœ¨ `prompts.py` ä¸­å¯ä»¥ä¿®æ”¹å„ Agent çš„ç³»çµ±æç¤ºè©ï¼Œèª¿æ•´å…¶è¡Œç‚ºå’Œå›æ‡‰é¢¨æ ¼ã€‚

## ğŸ¨ Streamlit UI

å•Ÿå‹•åŒ…å«æœƒè­°å®¤é ç´„åŠŸèƒ½çš„ UIï¼š

```bash
streamlit run ui.py
```

åœ¨å´é‚Šæ¬„é¸æ“‡ã€ŒğŸ¢ æœƒè­°å®¤é ç´„ Agentã€å³å¯ä½¿ç”¨ã€‚
